<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    
      <title>gist: 83588 - http://d.hatena.ne.jp/buzztaiki/20090323/1237825838- GitHub</title>
    

    <link href="http://assets2.github.com/stylesheets/bundle_common.css?c7cdfd1c0e6c146521c4e6c7a3e43ad28ce3df8f" media="screen" rel="stylesheet" type="text/css" />
<link href="http://assets1.github.com/stylesheets/bundle_gist.css?c7cdfd1c0e6c146521c4e6c7a3e43ad28ce3df8f" media="screen" rel="stylesheet" type="text/css" />

    <script type="text/javascript" charset="utf-8">
      var GitHub = {}
    </script>
    <script src="http://assets0.github.com/javascripts/jquery/jquery-1.4.2.min.js?c7cdfd1c0e6c146521c4e6c7a3e43ad28ce3df8f" type="text/javascript"></script>
    <script src="http://assets0.github.com/javascripts/bundle_common.js?c7cdfd1c0e6c146521c4e6c7a3e43ad28ce3df8f" type="text/javascript"></script>
<script src="http://assets2.github.com/javascripts/bundle_gist.js?c7cdfd1c0e6c146521c4e6c7a3e43ad28ce3df8f" type="text/javascript"></script>

            
    
  <link href="http://github.com/api/oembed?format=json&amp;url=http%3A%2F%2Fgist.github.com%2F83588" rel="alternate" title="gist: 83588" type="application/json+oembed" />

        <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-3769691-4']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script');
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        ga.setAttribute('async', 'true');
        document.documentElement.firstChild.appendChild(ga);
      })();
    </script>

  </head>

  <body>
    <div id="main">
      <div id="header" class="">
        <div class="site">
          <div class="logo">
            <a href="/"><img src="/images/modules/header/logo_gist.png" alt="gist" /></a>
          </div>

          
            <div class="actions">
              <a href="/login?return_to=gist">Login</a>
              <a href="http://github.com/signup?return_to=gist">Signup for a GitHub Account</a>
            </div>
          

          <div class="topsearch">
            <form action="/gists/search" id="top_search_form" method="get">
              <input type="search" name="q" value="" results="5" class="search" placeholder="Search Gists&hellip;" /> <input type="submit" value="Search" class="button" />
              <input type="hidden" name="page" value="1" />
            </form>

            <ul class="nav">
              <li><a href="/">New Gist</a></li>
              
              <li><a href="/gists">All Gists</a></li>
              <li><a href="http://github.com">Back to GitHub</a></li>
            </ul>
          </div><!-- /.topsearch -->
        </div>
      </div>

    <div class="site">
      
<div class="secondary">

  <div id="owner">
    
      <div class="actor">
        <div class="gravatar">
          <img src="http://www.gravatar.com/avatar/5e74c451ece72023f3f06d8765e3dd60?s=140&d=http%3A%2F%2Fgithub.com%2Fimages%2Fgravatars%2Fgravatar-140.png" alt="" width="30" height="30"  />
        </div>
        <div class="name"><a href="/buzztaiki">buzztaiki</a> <span>(owner)</span></div>
      </div>
    
  </div>

  

  
  

  
  
  <div id="revisions">
    <h3>Revisions</h3>
    <ul>
      
      
        
        <li class="current">
          <img src="/images/modules/gist/dot_green.png" alt=""/><img src="/images/modules/gist/dot_green.png" alt=""/><img src="/images/modules/gist/dot_green.png" alt=""/><img src="/images/modules/gist/dot_green.png" alt=""/><img src="/images/modules/gist/dot_green.png" alt=""/><img src="/images/modules/gist/dot_gray.png" alt=""/><img src="/images/modules/gist/dot_gray.png" alt=""/>
          <a href="http://gist.github.com/83588/ffd86b78ab346ea8b9c176d10124aa29f46ef6bb" class="id">ffd86b</a>

          
            <a href="/buzztaiki" class="author">buzztaiki</a>
          
          <span class="date"><abbr class="relatize" title="2009-03-23 11:20:19">Mon Mar 23 11:20:19 -0700 2009</abbr></span>
        </li>
      
        
        <li class="other">
          <img src="/images/modules/gist/dot_red.png" alt=""/><img src="/images/modules/gist/dot_red.png" alt=""/><img src="/images/modules/gist/dot_gray.png" alt=""/><img src="/images/modules/gist/dot_gray.png" alt=""/><img src="/images/modules/gist/dot_gray.png" alt=""/><img src="/images/modules/gist/dot_gray.png" alt=""/><img src="/images/modules/gist/dot_gray.png" alt=""/>
          <a href="http://gist.github.com/83588/62508ac33bc59ad6668e2bd0eb60ed191a296172" class="id">62508a</a>

          
            <a href="/buzztaiki" class="author">buzztaiki</a>
          
          <span class="date"><abbr class="relatize" title="2009-03-23 08:45:36">Mon Mar 23 08:45:36 -0700 2009</abbr></span>
        </li>
      
        
        <li class="other">
          <img src="/images/modules/gist/dot_green.png" alt=""/><img src="/images/modules/gist/dot_green.png" alt=""/><img src="/images/modules/gist/dot_gray.png" alt=""/><img src="/images/modules/gist/dot_gray.png" alt=""/><img src="/images/modules/gist/dot_gray.png" alt=""/><img src="/images/modules/gist/dot_gray.png" alt=""/><img src="/images/modules/gist/dot_gray.png" alt=""/>
          <a href="http://gist.github.com/83588/ab58e1dd0529bc59aed5ade06885cec0bc8584e5" class="id">ab58e1</a>

          
            <a href="/buzztaiki" class="author">buzztaiki</a>
          
          <span class="date"><abbr class="relatize" title="2009-03-23 08:45:07">Mon Mar 23 08:45:07 -0700 2009</abbr></span>
        </li>
      
        
        <li class="other">
          <img src="/images/modules/gist/dot_green.png" alt=""/><img src="/images/modules/gist/dot_green.png" alt=""/><img src="/images/modules/gist/dot_green.png" alt=""/><img src="/images/modules/gist/dot_green.png" alt=""/><img src="/images/modules/gist/dot_green.png" alt=""/><img src="/images/modules/gist/dot_green.png" alt=""/><img src="/images/modules/gist/dot_gray.png" alt=""/>
          <a href="http://gist.github.com/83588/f072c14d93ad8526be4fcdd61a0fee2bdbed9dbc" class="id">f072c1</a>

          
            <a href="/buzztaiki" class="author">buzztaiki</a>
          
          <span class="date"><abbr class="relatize" title="2009-03-23 08:21:48">Mon Mar 23 08:21:48 -0700 2009</abbr></span>
        </li>
      
    </ul>
  </div>
  
</div><!-- /.secondary -->

<div class="main">
  <div id="repos">
    <div class="repo public">
      <div class="title">
        <div class="path">
          gist: 83588

          

          
            <a href="/gists/83588/download"><img alt="Download_button" border="0" class="button" src="http://assets3.github.com/images/modules/repos/download_button.png?c7cdfd1c0e6c146521c4e6c7a3e43ad28ce3df8f" /></a>
          

          
            
            <a href="http://github.com/signup"><img alt="fork" class="button" src="http://assets1.github.com/images/modules/repos/fork_button.png?c7cdfd1c0e6c146521c4e6c7a3e43ad28ce3df8f" /></a>
          
          
        </div>

        
          <div class="security public_security" style="">
            <a href="#public_repo" rel="facebox"><img src="/images/icons/public.png" alt="public" /></a>
          </div>
        

        <div id="private_repo" class="hidden">
          <h2>Private Gist</h2>
          <p>
            All pages are served over SSL and all pushing and pulling is done over SSH.
            No one may fork, clone, or view it unless they are given this private URL.
          </p>
          <p>Every gist with this icon (<img src="/images/icons/private.png" alt="private" />) is private.</p>
        </div>
        <div class="security public_security" style="display:none">
          <a href="#public_repo" rel="facebox"><img src="/images/icons/public.png" alt="public" /></a>
        </div>
        <div id="public_repo" class="hidden">
          <h2>Public Gist</h2>
          <p>Anyone may fork, clone, or view it.</p>
          <p>Every repository with this icon (<img src="/images/icons/public.png" alt="public" />) is public.</p>
        </div>
      </div>

      <div class="meta">
        <table>
          
          <tr>
            <td class="label">Description:</td>
            <td>
              <div class="description">
                <span id="gist-text-description" class="edit">http://d.hatena.ne.jp/buzztaiki/20090323/1237825838</span>
                
              </div>
            </td>
          </tr>
          

          
            <tr>
              <td class="label">Public Clone URL:</td>
              <td>
                <a rel="#git-clone" class="git_url_facebox" href="git://gist.github.com/83588.git">git://gist.github.com/83588.git</a>
                <div id="git-clone" style="display:none; min-width:500px">
                  Give this clone URL to anyone.
                  <br/>

                  <code>git clone git://gist.github.com/83588.git gist-83588</code>
                </div>
              </td>
            </tr>
          

          

          
            <tr>
              <td class="label">Embed All Files:</td>
              <td>
                <a href="#" class="gist-embed-link">show embed</a>
                <input class="gist-embed-box" type="text" size="25" value='<script src="http://gist.github.com/83588.js"> </script>' style="display:none;"/>
              </td>
            </tr>
          

        </table>
      </div>
    </div>
  </div>

  <div id="files">

    
    
      

      <div class="file" id="file_anything_tags.el">
  <div class="meta clearfix">
    <div class="info">
      <span class="code">anything-tags.el <a href="#file_anything_tags.el">#</a></span>
    </div>
    <div class="actions">
      
      <div id="gist-embed" style="display:inline;">
        <a href="#" class="gist-embed-link">embed</a>
        <input class="gist-embed-box" type="text" size="25" value='<script src="http://gist.github.com/83588.js?file=anything-tags.el"></script>' style="display:none;"/>
      </div>
      
      
      <a href="/raw/83588/2537833cdc8f5f8619e11b5537f323a5d7e9d0d8/anything-tags.el">raw</a>
    </div>
  </div>
  
  
  <div class="data syntax type-scheme">
    
      <table cellpadding="0" cellspacing="0">
        <tr>
          <td>
            <pre class="line_numbers"><span id="LID1" rel="#L1">1</span>
<span id="LID2" rel="#L2">2</span>
<span id="LID3" rel="#L3">3</span>
<span id="LID4" rel="#L4">4</span>
<span id="LID5" rel="#L5">5</span>
<span id="LID6" rel="#L6">6</span>
<span id="LID7" rel="#L7">7</span>
<span id="LID8" rel="#L8">8</span>
<span id="LID9" rel="#L9">9</span>
<span id="LID10" rel="#L10">10</span>
<span id="LID11" rel="#L11">11</span>
<span id="LID12" rel="#L12">12</span>
<span id="LID13" rel="#L13">13</span>
<span id="LID14" rel="#L14">14</span>
<span id="LID15" rel="#L15">15</span>
<span id="LID16" rel="#L16">16</span>
<span id="LID17" rel="#L17">17</span>
<span id="LID18" rel="#L18">18</span>
<span id="LID19" rel="#L19">19</span>
<span id="LID20" rel="#L20">20</span>
<span id="LID21" rel="#L21">21</span>
<span id="LID22" rel="#L22">22</span>
<span id="LID23" rel="#L23">23</span>
<span id="LID24" rel="#L24">24</span>
<span id="LID25" rel="#L25">25</span>
<span id="LID26" rel="#L26">26</span>
<span id="LID27" rel="#L27">27</span>
<span id="LID28" rel="#L28">28</span>
<span id="LID29" rel="#L29">29</span>
<span id="LID30" rel="#L30">30</span>
<span id="LID31" rel="#L31">31</span>
<span id="LID32" rel="#L32">32</span>
<span id="LID33" rel="#L33">33</span>
<span id="LID34" rel="#L34">34</span>
<span id="LID35" rel="#L35">35</span>
<span id="LID36" rel="#L36">36</span>
<span id="LID37" rel="#L37">37</span>
<span id="LID38" rel="#L38">38</span>
<span id="LID39" rel="#L39">39</span>
<span id="LID40" rel="#L40">40</span>
<span id="LID41" rel="#L41">41</span>
<span id="LID42" rel="#L42">42</span>
<span id="LID43" rel="#L43">43</span>
<span id="LID44" rel="#L44">44</span>
<span id="LID45" rel="#L45">45</span>
<span id="LID46" rel="#L46">46</span>
<span id="LID47" rel="#L47">47</span>
<span id="LID48" rel="#L48">48</span>
<span id="LID49" rel="#L49">49</span>
<span id="LID50" rel="#L50">50</span>
<span id="LID51" rel="#L51">51</span>
<span id="LID52" rel="#L52">52</span>
<span id="LID53" rel="#L53">53</span>
<span id="LID54" rel="#L54">54</span>
<span id="LID55" rel="#L55">55</span>
<span id="LID56" rel="#L56">56</span>
<span id="LID57" rel="#L57">57</span>
<span id="LID58" rel="#L58">58</span>
<span id="LID59" rel="#L59">59</span>
<span id="LID60" rel="#L60">60</span>
<span id="LID61" rel="#L61">61</span>
<span id="LID62" rel="#L62">62</span>
<span id="LID63" rel="#L63">63</span>
<span id="LID64" rel="#L64">64</span>
<span id="LID65" rel="#L65">65</span>
<span id="LID66" rel="#L66">66</span>
<span id="LID67" rel="#L67">67</span>
<span id="LID68" rel="#L68">68</span>
<span id="LID69" rel="#L69">69</span>
<span id="LID70" rel="#L70">70</span>
<span id="LID71" rel="#L71">71</span>
<span id="LID72" rel="#L72">72</span>
<span id="LID73" rel="#L73">73</span>
<span id="LID74" rel="#L74">74</span>
<span id="LID75" rel="#L75">75</span>
<span id="LID76" rel="#L76">76</span>
<span id="LID77" rel="#L77">77</span>
<span id="LID78" rel="#L78">78</span>
<span id="LID79" rel="#L79">79</span>
<span id="LID80" rel="#L80">80</span>
<span id="LID81" rel="#L81">81</span>
<span id="LID82" rel="#L82">82</span>
<span id="LID83" rel="#L83">83</span>
<span id="LID84" rel="#L84">84</span>
<span id="LID85" rel="#L85">85</span>
<span id="LID86" rel="#L86">86</span>
<span id="LID87" rel="#L87">87</span>
<span id="LID88" rel="#L88">88</span>
<span id="LID89" rel="#L89">89</span>
<span id="LID90" rel="#L90">90</span>
<span id="LID91" rel="#L91">91</span>
<span id="LID92" rel="#L92">92</span>
<span id="LID93" rel="#L93">93</span>
<span id="LID94" rel="#L94">94</span>
<span id="LID95" rel="#L95">95</span>
<span id="LID96" rel="#L96">96</span>
<span id="LID97" rel="#L97">97</span>
<span id="LID98" rel="#L98">98</span>
<span id="LID99" rel="#L99">99</span>
<span id="LID100" rel="#L100">100</span>
<span id="LID101" rel="#L101">101</span>
<span id="LID102" rel="#L102">102</span>
<span id="LID103" rel="#L103">103</span>
<span id="LID104" rel="#L104">104</span>
<span id="LID105" rel="#L105">105</span>
<span id="LID106" rel="#L106">106</span>
<span id="LID107" rel="#L107">107</span>
<span id="LID108" rel="#L108">108</span>
<span id="LID109" rel="#L109">109</span>
<span id="LID110" rel="#L110">110</span>
<span id="LID111" rel="#L111">111</span>
<span id="LID112" rel="#L112">112</span>
<span id="LID113" rel="#L113">113</span>
<span id="LID114" rel="#L114">114</span>
<span id="LID115" rel="#L115">115</span>
<span id="LID116" rel="#L116">116</span>
<span id="LID117" rel="#L117">117</span>
<span id="LID118" rel="#L118">118</span>
<span id="LID119" rel="#L119">119</span>
<span id="LID120" rel="#L120">120</span>
<span id="LID121" rel="#L121">121</span>
<span id="LID122" rel="#L122">122</span>
<span id="LID123" rel="#L123">123</span>
<span id="LID124" rel="#L124">124</span>
<span id="LID125" rel="#L125">125</span>
<span id="LID126" rel="#L126">126</span>
<span id="LID127" rel="#L127">127</span>
<span id="LID128" rel="#L128">128</span>
<span id="LID129" rel="#L129">129</span>
<span id="LID130" rel="#L130">130</span>
<span id="LID131" rel="#L131">131</span>
<span id="LID132" rel="#L132">132</span>
<span id="LID133" rel="#L133">133</span>
<span id="LID134" rel="#L134">134</span>
<span id="LID135" rel="#L135">135</span>
<span id="LID136" rel="#L136">136</span>
<span id="LID137" rel="#L137">137</span>
<span id="LID138" rel="#L138">138</span>
<span id="LID139" rel="#L139">139</span>
<span id="LID140" rel="#L140">140</span>
<span id="LID141" rel="#L141">141</span>
<span id="LID142" rel="#L142">142</span>
<span id="LID143" rel="#L143">143</span>
<span id="LID144" rel="#L144">144</span>
<span id="LID145" rel="#L145">145</span>
<span id="LID146" rel="#L146">146</span>
<span id="LID147" rel="#L147">147</span>
<span id="LID148" rel="#L148">148</span>
<span id="LID149" rel="#L149">149</span>
<span id="LID150" rel="#L150">150</span>
<span id="LID151" rel="#L151">151</span>
<span id="LID152" rel="#L152">152</span>
<span id="LID153" rel="#L153">153</span>
<span id="LID154" rel="#L154">154</span>
<span id="LID155" rel="#L155">155</span>
<span id="LID156" rel="#L156">156</span>
<span id="LID157" rel="#L157">157</span>
<span id="LID158" rel="#L158">158</span>
<span id="LID159" rel="#L159">159</span>
</pre>
          </td>
          <td width="100%">
            
              <div class="highlight"><pre><div class='line' id='LC1'><span class="c1">;;; anything-tags.el --- Yet another etags interface with anything.</span></div><div class='line' id='LC2'><br/></div><div class='line' id='LC3'><span class="c1">;; Copyright (C) 2009  Taiki SUGAWARA</span></div><div class='line' id='LC4'><br/></div><div class='line' id='LC5'><span class="c1">;; Author: Taiki SUGAWARA &lt;buzz.taiki@gmail.com&gt;</span></div><div class='line' id='LC6'><span class="c1">;; Keywords: anything, etags</span></div><div class='line' id='LC7'><br/></div><div class='line' id='LC8'><span class="c1">;; This program is free software; you can redistribute it and/or modify</span></div><div class='line' id='LC9'><span class="c1">;; it under the terms of the GNU General Public License as published by</span></div><div class='line' id='LC10'><span class="c1">;; the Free Software Foundation, either version 3 of the License, or</span></div><div class='line' id='LC11'><span class="c1">;; (at your option) any later version.</span></div><div class='line' id='LC12'><br/></div><div class='line' id='LC13'><span class="c1">;; This program is distributed in the hope that it will be useful,</span></div><div class='line' id='LC14'><span class="c1">;; but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div><div class='line' id='LC15'><span class="c1">;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div><div class='line' id='LC16'><span class="c1">;; GNU General Public License for more details.</span></div><div class='line' id='LC17'><br/></div><div class='line' id='LC18'><span class="c1">;; You should have received a copy of the GNU General Public License</span></div><div class='line' id='LC19'><span class="c1">;; along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div><div class='line' id='LC20'><br/></div><div class='line' id='LC21'><span class="c1">;;; Code:</span></div><div class='line' id='LC22'><br/></div><div class='line' id='LC23'><span class="p">(</span><span class="nf">require</span> <span class="ss">&#39;cl</span><span class="p">)</span></div><div class='line' id='LC24'><span class="p">(</span><span class="nf">require</span> <span class="ss">&#39;anything-etags</span><span class="p">)</span></div><div class='line' id='LC25'><br/></div><div class='line' id='LC26'><span class="p">(</span><span class="nf">defvar</span> <span class="nv">anything-tags-buffer-name</span> <span class="s">" *Anything-Tags*"</span><span class="p">)</span></div><div class='line' id='LC27'><br/></div><div class='line' id='LC28'><span class="p">(</span><span class="nf">defvar</span> <span class="nv">anything-c-source-tags-select</span></div><div class='line' id='LC29'>&nbsp;&nbsp;<span class="o">&#39;</span><span class="p">((</span><span class="nf">name</span> <span class="o">.</span> <span class="s">"Tags"</span><span class="p">)</span></div><div class='line' id='LC30'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">init</span> <span class="o">.</span> <span class="p">(</span><span class="nf">anything-tags-init</span><span class="p">))</span></div><div class='line' id='LC31'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">candidates-in-buffer</span><span class="p">)</span></div><div class='line' id='LC32'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">action</span></div><div class='line' id='LC33'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="s">"Select Tag"</span> <span class="o">.</span> <span class="nv">anything-tags-select</span><span class="p">))))</span></div><div class='line' id='LC34'><br/></div><div class='line' id='LC35'><span class="p">(</span><span class="nf">defun</span> <span class="nv">anything-tags-buffer-name</span> <span class="p">(</span><span class="nf">tag-file</span><span class="p">)</span></div><div class='line' id='LC36'>&nbsp;&nbsp;<span class="p">(</span><span class="nf">concat</span> <span class="nv">anything-tags-buffer-name</span> <span class="nv">tag-file</span><span class="p">))</span></div><div class='line' id='LC37'><br/></div><div class='line' id='LC38'><span class="p">(</span><span class="nf">defun</span> <span class="nv">anything-tags-tag-file-valid-p</span> <span class="p">(</span><span class="nf">tag-file</span><span class="p">)</span></div><div class='line' id='LC39'>&nbsp;&nbsp;<span class="p">(</span><span class="k">and </span><span class="nv">tag-file</span></div><div class='line' id='LC40'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">file-exists-p</span> <span class="nv">tag-file</span><span class="p">)</span></div><div class='line' id='LC41'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">file-regular-p</span> <span class="nv">tag-file</span><span class="p">)))</span></div><div class='line' id='LC42'>&nbsp;&nbsp;</div><div class='line' id='LC43'><span class="p">(</span><span class="nf">defun</span> <span class="nv">anything-tags-table-buffers</span> <span class="p">(</span><span class="nf">tag-file</span><span class="p">)</span></div><div class='line' id='LC44'>&nbsp;&nbsp;<span class="p">(</span><span class="nf">remove-if-not</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">x</span><span class="p">)</span></div><div class='line' id='LC45'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="k">and </span><span class="p">(</span><span class="nf">buffer-file-name</span> <span class="nv">x</span><span class="p">)</span></div><div class='line' id='LC46'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">string=</span> <span class="p">(</span><span class="nf">expand-file-name</span> <span class="p">(</span><span class="nf">buffer-file-name</span> <span class="nv">x</span><span class="p">))</span></div><div class='line' id='LC47'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">expand-file-name</span> <span class="nv">tag-file</span><span class="p">))))</span></div><div class='line' id='LC48'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">buffer-list</span><span class="p">)))</span></div><div class='line' id='LC49'><br/></div><div class='line' id='LC50'><span class="c1">;;; unified tag selection</span></div><div class='line' id='LC51'><span class="p">(</span><span class="nf">defun</span> <span class="nv">anything-tags-init</span> <span class="p">()</span></div><div class='line' id='LC52'>&nbsp;&nbsp;<span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">tag-file</span> <span class="p">(</span><span class="nf">anything-etags-get-tag-file</span><span class="p">)))</span></div><div class='line' id='LC53'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">when</span> <span class="p">(</span><span class="nf">anything-tags-tag-file-valid-p</span> <span class="nv">tag-file</span><span class="p">)</span></div><div class='line' id='LC54'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">unless</span> <span class="p">(</span><span class="k">and </span><span class="p">(</span><span class="nf">get-buffer</span> <span class="p">(</span><span class="nf">anything-tags-buffer-name</span> <span class="nv">tag-file</span><span class="p">))</span></div><div class='line' id='LC55'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">anything-tags-table-buffers</span> <span class="nv">tag-file</span><span class="p">))</span></div><div class='line' id='LC56'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">anything-tags-generate-tags-buffer</span> <span class="nv">tag-file</span><span class="p">))</span></div><div class='line' id='LC57'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">with-current-buffer</span> <span class="p">(</span><span class="nf">anything-candidate-buffer</span> <span class="ss">&#39;global</span><span class="p">)</span></div><div class='line' id='LC58'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">erase-buffer</span><span class="p">)</span></div><div class='line' id='LC59'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">insert-buffer-substring</span> <span class="p">(</span><span class="nf">anything-tags-buffer-name</span> <span class="nv">tag-file</span><span class="p">))))))</span></div><div class='line' id='LC60'><br/></div><div class='line' id='LC61'><span class="p">(</span><span class="nf">defun</span> <span class="nv">anything-tags-select</span> <span class="p">(</span><span class="nf">tag</span><span class="p">)</span></div><div class='line' id='LC62'>&nbsp;&nbsp;<span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">tag-file</span> <span class="p">(</span><span class="nf">anything-etags-get-tag-file</span><span class="p">))</span></div><div class='line' id='LC63'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">tag-props-list</span><span class="p">)</span></div><div class='line' id='LC64'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">with-current-buffer</span> <span class="p">(</span><span class="nf">anything-tags-buffer-name</span> <span class="nv">tag-file</span><span class="p">)</span></div><div class='line' id='LC65'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">setq</span> <span class="nv">tag-props-list</span> <span class="p">(</span><span class="nf">anything-tags-find-tag-props-list</span> <span class="nv">tag-file</span> <span class="nv">tag</span><span class="p">)))</span></div><div class='line' id='LC66'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">= </span><span class="p">(</span><span class="nb">length </span><span class="nv">tag-props-list</span><span class="p">)</span> <span class="mi">1</span><span class="p">)</span></div><div class='line' id='LC67'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">anything-tags-goto-tag</span> <span class="p">(</span><span class="nb">car </span><span class="nv">tag-props-list</span><span class="p">))</span></div><div class='line' id='LC68'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">anything-tags-guess-tag-of-tags</span> <span class="nv">tag-props-list</span><span class="p">))))</span></div><div class='line' id='LC69'><br/></div><div class='line' id='LC70'><span class="c1">;;; tag of tags selection</span></div><div class='line' id='LC71'><span class="p">(</span><span class="nf">defun</span> <span class="nv">anything-tags-guess-tag-of-tags</span> <span class="p">(</span><span class="nf">tag-props-list</span><span class="p">)</span></div><div class='line' id='LC72'>&nbsp;&nbsp;<span class="p">(</span><span class="nf">anything</span> <span class="p">(</span><span class="nb">list </span><span class="p">(</span><span class="nf">anything-tags-guess-tag-of-tags-source</span></div><div class='line' id='LC73'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s">"Select Tag"</span> <span class="nv">tag-props-list</span><span class="p">))))</span></div><div class='line' id='LC74'><br/></div><div class='line' id='LC75'><span class="p">(</span><span class="nf">defun</span> <span class="nv">anything-tags-guess-tag-of-tags-source</span> <span class="p">(</span><span class="nf">name</span> <span class="nv">tag-props-list</span><span class="p">)</span></div><div class='line' id='LC76'>&nbsp;&nbsp;<span class="o">`</span><span class="p">((</span><span class="nf">name</span> <span class="o">.</span> <span class="o">,</span><span class="nv">name</span><span class="p">)</span></div><div class='line' id='LC77'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">candidates</span> <span class="o">.</span> <span class="o">,</span><span class="nv">tag-props-list</span><span class="p">)</span></div><div class='line' id='LC78'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">candidate-transformer</span></div><div class='line' id='LC79'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">cds</span><span class="p">)</span></div><div class='line' id='LC80'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">mapcar</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">x</span><span class="p">)</span></div><div class='line' id='LC81'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nb">cons </span><span class="p">(</span><span class="nf">format</span> <span class="s">"%s:\n  %s"</span></div><div class='line' id='LC82'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">plist-get</span> <span class="nv">x</span> <span class="nv">:file-label</span><span class="p">)</span></div><div class='line' id='LC83'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">plist-get</span> <span class="nv">x</span> <span class="nv">:tag</span><span class="p">))</span></div><div class='line' id='LC84'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">x</span><span class="p">))</span></div><div class='line' id='LC85'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">cds</span><span class="p">)))</span></div><div class='line' id='LC86'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">multiline</span> <span class="o">.</span> <span class="nv">t</span><span class="p">)</span></div><div class='line' id='LC87'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">action</span></div><div class='line' id='LC88'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="s">"Goto Tag"</span> <span class="o">.</span> <span class="nv">anything-tags-goto-tag</span><span class="p">))))</span></div><div class='line' id='LC89'><br/></div><div class='line' id='LC90'><span class="c1">;;; tag jump</span></div><div class='line' id='LC91'><span class="p">(</span><span class="nf">defun</span> <span class="nv">anything-tags-goto-tag</span> <span class="p">(</span><span class="nf">tag-props</span><span class="p">)</span></div><div class='line' id='LC92'>&nbsp;&nbsp;<span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">tag-info</span> <span class="p">(</span><span class="nf">plist-get</span> <span class="nv">tag-props</span> <span class="nv">:tag-info</span><span class="p">))</span></div><div class='line' id='LC93'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">goto-func</span> <span class="p">(</span><span class="nf">plist-get</span> <span class="nv">tag-props</span> <span class="nv">:goto-func</span><span class="p">)))</span></div><div class='line' id='LC94'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">tag-find-file-of-tag</span> <span class="p">(</span><span class="nf">plist-get</span> <span class="nv">tag-props</span> <span class="nv">:file-path</span><span class="p">))</span></div><div class='line' id='LC95'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">widen</span><span class="p">)</span></div><div class='line' id='LC96'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">funcall</span> <span class="nv">goto-func</span> <span class="nv">tag-info</span><span class="p">)))</span></div><div class='line' id='LC97'>&nbsp;&nbsp;</div><div class='line' id='LC98'><span class="c1">;;; tag buffer manipulation</span></div><div class='line' id='LC99'><span class="p">(</span><span class="nf">defun</span> <span class="nv">anything-tags-generate-tags-buffer</span> <span class="p">(</span><span class="nf">tag-file</span><span class="p">)</span></div><div class='line' id='LC100'>&nbsp;&nbsp;<span class="p">(</span><span class="nf">interactive</span></div><div class='line' id='LC101'>&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">tag-file</span> <span class="p">(</span><span class="nf">anything-etags-get-tag-file</span><span class="p">)))</span></div><div class='line' id='LC102'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nb">list </span><span class="p">(</span><span class="nf">read-file-name</span> <span class="s">"Find tag: "</span></div><div class='line' id='LC103'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">file-name-directory</span> <span class="nv">tag-file</span><span class="p">)</span> <span class="nv">nil</span> <span class="nv">t</span></div><div class='line' id='LC104'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">file-name-nondirectory</span> <span class="nv">tag-file</span><span class="p">)))))</span></div><div class='line' id='LC105'>&nbsp;&nbsp;<span class="p">(</span><span class="nf">when</span> <span class="p">(</span><span class="nf">anything-tags-tag-file-valid-p</span> <span class="nv">tag-file</span><span class="p">)</span></div><div class='line' id='LC106'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">dolist</span> <span class="p">(</span><span class="nf">buf</span> <span class="p">(</span><span class="nf">anything-tags-table-buffers</span> <span class="nv">tag-file</span><span class="p">))</span></div><div class='line' id='LC107'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">kill-buffer</span> <span class="nv">buf</span><span class="p">))</span></div><div class='line' id='LC108'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="k">let </span><span class="p">(</span><span class="nf">tab</span><span class="p">)</span></div><div class='line' id='LC109'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">with-current-buffer</span> <span class="p">(</span><span class="nf">get-buffer-create</span> <span class="p">(</span><span class="nf">anything-tags-buffer-name</span> <span class="nv">tag-file</span><span class="p">))</span></div><div class='line' id='LC110'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">erase-buffer</span><span class="p">)</span></div><div class='line' id='LC111'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1">;; visit tags table and save `tags-file-name&#39; to buffer local variable.</span></div><div class='line' id='LC112'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">tags-add-tables</span> <span class="nv">t</span><span class="p">))</span></div><div class='line' id='LC113'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">visit-tags-table</span> <span class="nv">tag-file</span> <span class="nv">t</span><span class="p">))</span></div><div class='line' id='LC114'><br/></div><div class='line' id='LC115'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">save-excursion</span></div><div class='line' id='LC116'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">visit-tags-table-buffer</span><span class="p">)</span></div><div class='line' id='LC117'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">setq</span> <span class="nv">tab</span> <span class="p">(</span><span class="nf">funcall</span> <span class="nv">tags-completion-table-function</span><span class="p">)))</span></div><div class='line' id='LC118'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="k">let </span><span class="p">(</span><span class="nf">list</span><span class="p">)</span></div><div class='line' id='LC119'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">mapatoms</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">x</span><span class="p">)</span> <span class="p">(</span><span class="nf">push</span> <span class="p">(</span><span class="nf">symbol-name</span> <span class="nv">x</span><span class="p">)</span> <span class="nv">list</span><span class="p">))</span> <span class="nv">tab</span><span class="p">)</span></div><div class='line' id='LC120'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">setq</span> <span class="nv">list</span></div><div class='line' id='LC121'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">sort</span> <span class="nv">list</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">a</span> <span class="nv">b</span><span class="p">)</span></div><div class='line' id='LC122'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">cmp</span> <span class="p">(</span><span class="nf">compare-strings</span> <span class="nv">a</span> <span class="mi">0</span> <span class="nv">nil</span> <span class="nv">b</span> <span class="mi">0</span> <span class="nv">nil</span> <span class="nv">t</span><span class="p">)))</span></div><div class='line' id='LC123'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nf">eq</span> <span class="nv">cmp</span> <span class="nv">t</span><span class="p">)</span> <span class="p">(</span><span class="nf">string&lt;</span> <span class="nv">a</span> <span class="nv">b</span><span class="p">)</span> <span class="p">(</span><span class="nb">&lt; </span><span class="nv">cmp</span> <span class="mi">0</span><span class="p">))))))</span></div><div class='line' id='LC124'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">dolist</span> <span class="p">(</span><span class="nf">x</span> <span class="nv">list</span><span class="p">)</span></div><div class='line' id='LC125'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">insert</span> <span class="nv">x</span> <span class="s">"\n"</span><span class="p">)))))))</span></div><div class='line' id='LC126'><br/></div><div class='line' id='LC127'><span class="p">(</span><span class="nf">defun</span> <span class="nv">anything-tags-find-tag-props-list</span> <span class="p">(</span><span class="nf">tag-file</span> <span class="nv">tag</span><span class="p">)</span></div><div class='line' id='LC128'>&nbsp;&nbsp;<span class="c1">;; copy of `etags-tags-apropos&#39;</span></div><div class='line' id='LC129'>&nbsp;&nbsp;<span class="p">(</span><span class="nf">save-excursion</span></div><div class='line' id='LC130'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">visit-tags-table-buffer</span><span class="p">)</span></div><div class='line' id='LC131'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">goto-char</span> <span class="p">(</span><span class="nf">point-min</span><span class="p">))</span></div><div class='line' id='LC132'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">case-fold-search</span> <span class="nv">nil</span><span class="p">)</span></div><div class='line' id='LC133'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">tags</span><span class="p">)</span></div><div class='line' id='LC134'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">while</span> <span class="p">(</span><span class="nf">search-forward</span> <span class="p">(</span><span class="nf">concat</span> <span class="s">"\^?"</span> <span class="nv">tag</span> <span class="s">"\^a"</span><span class="p">)</span> <span class="nv">nil</span> <span class="nv">t</span><span class="p">)</span></div><div class='line' id='LC135'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">beginning-of-line</span><span class="p">)</span></div><div class='line' id='LC136'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="k">let* </span><span class="p">((</span><span class="nf">goto-func</span> <span class="nv">goto-tag-location-function</span><span class="p">)</span></div><div class='line' id='LC137'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">tag-info</span> <span class="p">(</span><span class="nf">save-excursion</span> <span class="p">(</span><span class="nf">funcall</span> <span class="nv">snarf-tag-function</span><span class="p">)))</span></div><div class='line' id='LC138'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">tag</span> <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nf">eq</span> <span class="nv">t</span> <span class="p">(</span><span class="nb">car </span><span class="nv">tag-info</span><span class="p">))</span> <span class="nv">nil</span> <span class="p">(</span><span class="nb">car </span><span class="nv">tag-info</span><span class="p">)))</span></div><div class='line' id='LC139'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">file-path</span> <span class="p">(</span><span class="k">and </span><span class="nv">tag</span> <span class="p">(</span><span class="nf">file-of-tag</span><span class="p">)))</span></div><div class='line' id='LC140'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">file-label</span> <span class="p">(</span><span class="k">and </span><span class="nv">tag</span> <span class="p">(</span><span class="nf">file-of-tag</span> <span class="nv">t</span><span class="p">))))</span></div><div class='line' id='LC141'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">when</span> <span class="nv">tag</span></div><div class='line' id='LC142'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">push</span> <span class="p">(</span><span class="nb">list </span><span class="nv">:tag</span> <span class="nv">tag</span> <span class="nv">:tag-info</span> <span class="nv">tag-info</span></div><div class='line' id='LC143'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">:file-label</span> <span class="nv">file-label</span> <span class="nv">:file-path</span> <span class="nv">file-path</span></div><div class='line' id='LC144'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">:goto-func</span> <span class="nv">goto-func</span><span class="p">)</span></div><div class='line' id='LC145'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">tags</span><span class="p">)))</span></div><div class='line' id='LC146'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">forward-line</span> <span class="mi">1</span><span class="p">))</span></div><div class='line' id='LC147'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">tags</span><span class="p">)))</span></div><div class='line' id='LC148'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class='line' id='LC149'><span class="c1">;;; find-tag emulation</span></div><div class='line' id='LC150'><span class="p">(</span><span class="nf">defun</span> <span class="nv">anything-tags-find-tag</span> <span class="p">(</span><span class="nf">tag</span><span class="p">)</span></div><div class='line' id='LC151'>&nbsp;&nbsp;<span class="p">(</span><span class="nf">interactive</span></div><div class='line' id='LC152'>&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nb">list </span><span class="p">(</span><span class="nf">funcall</span> <span class="p">(</span><span class="k">or </span><span class="nv">find-tag-default-function</span></div><div class='line' id='LC153'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">(</span><span class="nf">get</span> <span class="nv">major-mode</span> <span class="ss">&#39;find-tag-default-function</span><span class="p">)</span></div><div class='line' id='LC154'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ss">&#39;find-tag-default</span><span class="p">))))</span></div><div class='line' id='LC155'>&nbsp;&nbsp;<span class="p">(</span><span class="nf">anything</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">anything-c-source-tags-select</span><span class="p">)</span> <span class="nv">tag</span> <span class="nv">nil</span> <span class="nv">nil</span> <span class="nv">tag</span><span class="p">))</span></div><div class='line' id='LC156'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class='line' id='LC157'><br/></div><div class='line' id='LC158'><span class="p">(</span><span class="nf">provide</span> <span class="ss">&#39;anything-tags</span><span class="p">)</span></div><div class='line' id='LC159'><span class="c1">;;; anything-tags.el ends here</span></div></pre></div>
            
          </td>
        </tr>
      </table>
    
  </div>


  
</div>


      

     <!-- cache end -->

    

  </div>

  
    <div id="comments">
      

      
        Please <a href="/login?return_to=http://gist.github.com/83588">log in</a> to comment.
      
    </div>
  

</div><!-- /.main -->

    </div> <!-- site -->

    <div class="push"></div>

    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="logo">
            <a href="http://github.com/">
              <img src="/images/modules/header/logo_white.png" alt="GitHub" />
            </a>
          </div>
          <div class="more">
            <div class="links">
              <a href="http://github.com/blog"><strong>The GitHub Blog</strong></a> |
              <a href="http://support.github.com">Support</a> |
              <a href="http://github.com/contact">Contact Us</a>
            </div>
            <div class="company">
              &copy;
              2010
              GitHub Inc.
              All rights reserved.
           </div>
          </div>
        </div>
        <div class="sponsor">
          <div>
            Powered by the <a href="http://www.rackspace.com ">Dedicated
            Servers</a> and<br/> <a href="http://www.rackspacecloud.com">Cloud
            Computing</a> of Rackspace Hosting<span>&reg;</span>
          </div>
          <a href="http://www.rackspace.com">
            <img alt="Dedicated Server" src="http://assets1.github.com/images/modules/footer/rackspace_logo.png?c7cdfd1c0e6c146521c4e6c7a3e43ad28ce3df8f" />
          </a>
        </div>
      </div>
    </div>

    <script>window._auth_token = "ee73ee7996d75ed4ac7b3abd115696fc6e4180e0"</script>
  </body>
</html>
